{% extends 'base.html' %}

{% block title %}Login - Django Cloud Storage{% endblock %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="card shadow-lg p-4 rounded-4" style="max-width: 440px; width: 100%; background: #ffffff;">
        <h2 class="text-center text-primary fw-bold mb-2">ðŸ”‘ Welcome Back!</h2>
        <p class="text-center text-muted mb-4">Log in to access your cloud storage.</p>

        <form method="post" class="needs-validation w-100" novalidate>
            {% csrf_token %}

            <div class="form-floating mb-3">
                <input type="text" name="username" id="id_username" class="form-control" placeholder="Username" required>
                <label for="id_username">Username</label>
            </div>

            <div class="form-floating mb-3 position-relative">
                <input type="password" name="password" id="id_password" class="form-control" placeholder="Password" required>
                <label for="id_password">Password</label>
                <span class="position-absolute top-50 end-0 translate-middle-y me-3 cursor-pointer" id="togglePassword">
                    <i class="fas fa-eye"></i>
                </span>
            </div>

            <button type="submit" class="btn btn-primary w-100 shadow-sm py-2">Log In</button>
        </form>

        <p class="text-center mt-3">
            Don't have an account? 
            <a href="{% url 'register' %}" class="text-decoration-none text-primary fw-bold">Sign up here</a>
        </p>
    </div>
</div>

<!-- Font Awesome for Eye Icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
    body {
        background: linear-gradient(135deg, #667eea, #764ba2);
    }

    .card {
        animation: fadeIn 0.8s ease-in-out;
    }

    .form-floating input {
        border-radius: 10px;
        padding: 10px;
        width: 100%;
    }

    .form-floating label {
        padding-left: 10px;
    }

    .form-floating input:focus {
        border: 2px solid #667eea;
        box-shadow: 0px 0px 5px #667eea;
    }

    .cursor-pointer {
        cursor: pointer;
    }

    #togglePassword {
        padding: 6px;
        border-radius: 6px;
        transition: background 0.2s;
    }

    #togglePassword:hover {
        background: rgba(0, 0, 0, 0.05);
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<script>
    // Toggle password visibility
    document.getElementById("togglePassword").addEventListener("click", function () {
        let passwordField = document.getElementById("id_password");
        let icon = this.querySelector("i");
        if (passwordField.type === "password") {
            passwordField.type = "text";
            icon.classList.replace("fa-eye", "fa-eye-slash");
        } else {
            passwordField.type = "password";
            icon.classList.replace("fa-eye-slash", "fa-eye");
        }
    });
</script>
{% endblock %}
